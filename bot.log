2026-01-27 15:25:51,626 - __main__ - INFO - üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...
2026-01-27 15:25:51,628 - __main__ - INFO - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –≥–æ—Ç–æ–≤–∞!
2026-01-27 15:25:52,142 - __main__ - INFO - ü§ñ Bot started! Press Ctrl+C to stop.
2026-01-27 15:25:52,143 - aiogram.dispatcher - INFO - Start polling
2026-01-27 15:25:52,143 - __main__ - INFO - üïí –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–¥–∞—á –∑–∞–ø—É—â–µ–Ω–æ.
2026-01-27 15:25:52,259 - aiogram.dispatcher - INFO - Run polling for bot @pidsadkalviv_bot id=8301191163 - '–ü—ñ–¥—Å–∞–¥–∫–∞ –õ—å–≤—ñ–≤'
2026-01-27 15:25:53,806 - aiogram.event - INFO - Update id=892635163 is handled. Duration 395 ms by bot id=8301191163
2026-01-27 15:25:59,515 - aiogram.event - INFO - Update id=892635164 is handled. Duration 228 ms by bot id=8301191163
2026-01-27 15:26:02,592 - aiogram.event - INFO - Update id=892635165 is handled. Duration 105 ms by bot id=8301191163
2026-01-27 15:26:03,741 - aiogram.event - INFO - Update id=892635166 is handled. Duration 187 ms by bot id=8301191163
2026-01-27 15:26:06,720 - aiogram.event - INFO - Update id=892635167 is not handled. Duration 4 ms by bot id=8301191163
2026-01-27 15:52:51,610 - __main__ - INFO - üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...
2026-01-27 15:52:51,617 - __main__ - INFO - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –≥–æ—Ç–æ–≤–∞!
2026-01-27 15:52:52,129 - __main__ - INFO - ü§ñ Bot started! Press Ctrl+C to stop.
2026-01-27 15:52:52,129 - aiogram.dispatcher - INFO - Start polling
2026-01-27 15:52:52,129 - __main__ - INFO - üïí –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–¥–∞—á –∑–∞–ø—É—â–µ–Ω–æ.
2026-01-27 15:52:53,993 - aiogram.dispatcher - INFO - Run polling for bot @pidsadkalviv_bot id=8301191163 - '–ü—ñ–¥—Å–∞–¥–∫–∞ –õ—å–≤—ñ–≤'
2026-01-27 15:52:55,417 - __main__ - ERROR - üî• Critical Update Error: table users has no column named created_at
Traceback (most recent call last):
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\error.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 58, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\fsm\middleware.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\dispatcher.py", line 283, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 189, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 181, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\middlewares.py", line 28, in __call__
    update_user_activity(user.id, username, full_name)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\database.py", line 262, in update_user_activity
    conn.execute('''
    ~~~~~~~~~~~~^^^^
        INSERT INTO users (user_id, username, name, phone, created_at, last_active)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
            name = excluded.name
            ^^^^^^^^^^^^^^^^^^^^
    ''', (user_id, username, name))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: table users has no column named created_at
2026-01-27 15:52:55,499 - aiogram.event - INFO - Update id=892635169 is handled. Duration 85 ms by bot id=8301191163
2026-01-27 15:58:00,234 - __main__ - INFO - üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...
2026-01-27 15:58:00,238 - __main__ - INFO - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –≥–æ—Ç–æ–≤–∞!
2026-01-27 15:58:00,741 - __main__ - INFO - ü§ñ Bot started! Press Ctrl+C to stop.
2026-01-27 15:58:00,742 - aiogram.dispatcher - INFO - Start polling
2026-01-27 15:58:00,742 - __main__ - INFO - üïí –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–¥–∞—á –∑–∞–ø—É—â–µ–Ω–æ.
2026-01-27 15:58:00,852 - aiogram.dispatcher - INFO - Run polling for bot @pidsadkalviv_bot id=8301191163 - '–ü—ñ–¥—Å–∞–¥–∫–∞ –õ—å–≤—ñ–≤'
2026-01-27 15:58:05,741 - aiogram.event - INFO - Update id=892635170 is handled. Duration 355 ms by bot id=8301191163
2026-01-27 15:58:07,951 - aiogram.event - INFO - Update id=892635171 is handled. Duration 289 ms by bot id=8301191163
2026-01-27 15:58:09,057 - aiogram.event - INFO - Update id=892635172 is handled. Duration 180 ms by bot id=8301191163
2026-01-27 15:58:12,803 - aiogram.event - INFO - Update id=892635173 is handled. Duration 490 ms by bot id=8301191163
2026-01-27 15:58:16,759 - aiogram.event - INFO - Update id=892635174 is handled. Duration 399 ms by bot id=8301191163
2026-01-27 15:58:22,504 - aiogram.event - INFO - Update id=892635175 is handled. Duration 114 ms by bot id=8301191163
2026-01-27 15:58:25,668 - aiogram.event - INFO - Update id=892635176 is handled. Duration 198 ms by bot id=8301191163
2026-01-27 15:58:29,172 - aiogram.event - INFO - Update id=892635177 is handled. Duration 382 ms by bot id=8301191163
2026-01-27 15:58:32,187 - aiogram.event - INFO - Update id=892635178 is handled. Duration 111 ms by bot id=8301191163
2026-01-27 15:58:33,135 - aiogram.event - INFO - Update id=892635179 is handled. Duration 111 ms by bot id=8301191163
2026-01-27 15:58:35,279 - aiogram.event - INFO - Update id=892635180 is handled. Duration 182 ms by bot id=8301191163
2026-01-27 15:58:38,465 - aiogram.event - INFO - Update id=892635181 is handled. Duration 141 ms by bot id=8301191163
2026-01-27 15:58:39,666 - aiogram.event - INFO - Update id=892635182 is handled. Duration 360 ms by bot id=8301191163
2026-01-27 15:58:43,204 - aiogram.event - INFO - Update id=892635183 is handled. Duration 572 ms by bot id=8301191163
2026-01-27 15:58:58,890 - aiogram.event - INFO - Update id=892635184 is handled. Duration 101 ms by bot id=8301191163
2026-01-27 15:59:01,813 - aiogram.event - INFO - Update id=892635185 is handled. Duration 1469 ms by bot id=8301191163
2026-01-27 15:59:05,421 - aiogram.event - INFO - Update id=892635186 is handled. Duration 1150 ms by bot id=8301191163
2026-01-27 15:59:11,844 - aiogram.event - INFO - Update id=892635187 is handled. Duration 199 ms by bot id=8301191163
2026-01-27 15:59:35,136 - __main__ - ERROR - üî• Critical Update Error: database is locked
Traceback (most recent call last):
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\error.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 58, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\fsm\middleware.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\dispatcher.py", line 283, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 189, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 181, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\middlewares.py", line 28, in __call__
    update_user_activity(user.id, username, full_name)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\database.py", line 262, in update_user_activity
    conn.execute('''
    ~~~~~~~~~~~~^^^^
        INSERT INTO users (user_id, username, name, phone, created_at, last_active)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
            name = excluded.name
            ^^^^^^^^^^^^^^^^^^^^
    ''', (user_id, username, name))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
2026-01-27 15:59:35,140 - aiogram.event - INFO - Update id=892635188 is handled. Duration 5057 ms by bot id=8301191163
2026-01-27 15:59:45,051 - __main__ - ERROR - üî• Critical Update Error: database is locked
Traceback (most recent call last):
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\error.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 58, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\fsm\middleware.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\dispatcher.py", line 283, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 189, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 181, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\middlewares.py", line 28, in __call__
    update_user_activity(user.id, username, full_name)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\database.py", line 262, in update_user_activity
    conn.execute('''
    ~~~~~~~~~~~~^^^^
        INSERT INTO users (user_id, username, name, phone, created_at, last_active)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
            name = excluded.name
            ^^^^^^^^^^^^^^^^^^^^
    ''', (user_id, username, name))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: database is locked
2026-01-27 15:59:45,053 - aiogram.event - INFO - Update id=892635189 is handled. Duration 5073 ms by bot id=8301191163
2026-01-27 16:00:12,857 - __main__ - INFO - üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...
2026-01-27 16:00:12,860 - __main__ - INFO - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –≥–æ—Ç–æ–≤–∞!
2026-01-27 16:00:13,362 - __main__ - INFO - ü§ñ Bot started! Press Ctrl+C to stop.
2026-01-27 16:00:13,362 - aiogram.dispatcher - INFO - Start polling
2026-01-27 16:00:13,362 - __main__ - INFO - üïí –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–¥–∞—á –∑–∞–ø—É—â–µ–Ω–æ.
2026-01-27 16:00:13,472 - aiogram.dispatcher - INFO - Run polling for bot @pidsadkalviv_bot id=8301191163 - '–ü—ñ–¥—Å–∞–¥–∫–∞ –õ—å–≤—ñ–≤'
2026-01-27 16:00:15,220 - aiogram.event - INFO - Update id=892635190 is handled. Duration 355 ms by bot id=8301191163
2026-01-27 16:00:40,774 - aiogram.event - INFO - Update id=892635191 is handled. Duration 399 ms by bot id=8301191163
2026-01-27 16:00:45,764 - aiogram.event - INFO - Update id=892635192 is handled. Duration 228 ms by bot id=8301191163
2026-01-27 16:01:04,105 - aiogram.event - INFO - Update id=892635193 is handled. Duration 591 ms by bot id=8301191163
2026-01-27 16:01:06,767 - aiogram.event - INFO - Update id=892635194 is handled. Duration 289 ms by bot id=8301191163
2026-01-27 16:01:08,842 - aiogram.event - INFO - Update id=892635195 is handled. Duration 121 ms by bot id=8301191163
2026-01-27 16:01:19,427 - aiogram.event - INFO - Update id=892635196 is handled. Duration 107 ms by bot id=8301191163
2026-01-27 16:01:26,032 - aiogram.event - INFO - Update id=892635197 is handled. Duration 274 ms by bot id=8301191163
2026-01-27 16:01:34,378 - aiogram.event - INFO - Update id=892635198 is handled. Duration 862 ms by bot id=8301191163
2026-01-27 16:01:43,064 - __main__ - ERROR - üî• Critical Update Error: no such column: message
Traceback (most recent call last):
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\error.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 58, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\fsm\middleware.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\dispatcher.py", line 283, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 189, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 181, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\middlewares.py", line 30, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\middlewares.py", line 58, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\handlers\chat.py", line 81, in start_chat_handler
    history = get_chat_history_text(my_id, target_user_id)
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\database.py", line 338, in get_chat_history_text
    rows = conn.execute('''
           ~~~~~~~~~~~~^^^^
        SELECT sender_id, message, timestamp FROM chat_history
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        WHERE (sender_id = ? AND receiver_id = ?) OR (sender_id = ? AND receiver_id = ?)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        ORDER BY timestamp DESC LIMIT 10
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ''', (user1, user2, user2, user1)).fetchall()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: message
2026-01-27 16:01:43,087 - aiogram.event - INFO - Update id=892635199 is handled. Duration 130 ms by bot id=8301191163
2026-01-27 16:03:15,407 - __main__ - INFO - üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...
2026-01-27 16:03:15,417 - __main__ - INFO - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –≥–æ—Ç–æ–≤–∞!
2026-01-27 16:03:15,920 - __main__ - INFO - ü§ñ Bot started! Press Ctrl+C to stop.
2026-01-27 16:03:15,921 - aiogram.dispatcher - INFO - Start polling
2026-01-27 16:03:15,921 - __main__ - INFO - üïí –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–¥–∞—á –∑–∞–ø—É—â–µ–Ω–æ.
2026-01-27 16:03:16,030 - aiogram.dispatcher - INFO - Run polling for bot @pidsadkalviv_bot id=8301191163 - '–ü—ñ–¥—Å–∞–¥–∫–∞ –õ—å–≤—ñ–≤'
2026-01-27 16:03:18,060 - __main__ - ERROR - üî• Critical Update Error: no such column: message
Traceback (most recent call last):
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\error.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 58, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\fsm\middleware.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\dispatcher.py", line 283, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 189, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 161, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 153, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\router.py", line 181, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\telegram.py", line 126, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\middlewares.py", line 30, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\middlewares.py", line 58, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Admin\AppData\Roaming\Python\Python314\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\handlers\chat.py", line 81, in start_chat_handler
    history = get_chat_history_text(my_id, target_user_id)
  File "C:\Users\Admin\source\repos\bohdandmytriv07-crypto\pidsadkalviv\tg_bot\database.py", line 338, in get_chat_history_text
    rows = conn.execute('''
           ~~~~~~~~~~~~^^^^
        SELECT sender_id, message, timestamp FROM chat_history
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        WHERE (sender_id = ? AND receiver_id = ?) OR (sender_id = ? AND receiver_id = ?)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        ORDER BY timestamp DESC LIMIT 10
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ''', (user1, user2, user2, user1)).fetchall()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: message
2026-01-27 16:03:18,065 - aiogram.event - INFO - Update id=892635200 is handled. Duration 252 ms by bot id=8301191163
2026-01-27 16:08:09,486 - __main__ - INFO - üöÄ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...
2026-01-27 16:08:09,490 - __main__ - INFO - ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö –≥–æ—Ç–æ–≤–∞!
2026-01-27 16:08:09,980 - __main__ - INFO - ü§ñ Bot started! Press Ctrl+C to stop.
2026-01-27 16:08:09,980 - aiogram.dispatcher - INFO - Start polling
2026-01-27 16:08:09,981 - __main__ - INFO - üïí –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫ —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–¥–∞—á –∑–∞–ø—É—â–µ–Ω–æ.
2026-01-27 16:08:10,089 - aiogram.dispatcher - INFO - Run polling for bot @pidsadkalviv_bot id=8301191163 - '–ü—ñ–¥—Å–∞–¥–∫–∞ –õ—å–≤—ñ–≤'
2026-01-27 16:08:15,697 - aiogram.event - INFO - Update id=892635201 is handled. Duration 534 ms by bot id=8301191163
2026-01-27 16:08:21,948 - aiogram.event - INFO - Update id=892635202 is handled. Duration 286 ms by bot id=8301191163
2026-01-27 16:08:24,013 - aiogram.event - INFO - Update id=892635203 is handled. Duration 244 ms by bot id=8301191163
2026-01-27 16:08:28,272 - aiogram.event - INFO - Update id=892635204 is handled. Duration 648 ms by bot id=8301191163
2026-01-27 16:08:37,843 - aiogram.event - INFO - Update id=892635205 is handled. Duration 795 ms by bot id=8301191163
